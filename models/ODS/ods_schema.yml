version: 2

models:
  - name: ods_employee_sales_performance
    description: "Tracks sales performance metrics for each employee."
    columns:
      - name: employee_id
        description: "Unique identifier for the employee."
        tests:
          - not_null
          - unique
      - name: first_name
        description: "Employee's first name."
      - name: last_name
        description: "Employee's last name."
      - name: number_of_sales
        description: "Number of sales transactions made by the employee."
      - name: total_sales
        description: "Total sales amount generated by the employee."
        tests:
          - not_null
      - name: first_sale_date
        description: "Date of the first sale made by the employee."
      - name: last_sale_date
        description: "Date of the latest sale made by the employee."
      - name: is_current
        description: "Indicates if the record is the current active record."
      - name: valid_from
        description: "Timestamp when the record became active."
      - name: valid_to
        description: "Timestamp when the record was superseded."
      - name: last_updated
        description: "Timestamp of the last update to the record."

  - name: ods_inventory_analysis
    description: "Analysis of inventory levels per product at each store."
    columns:
      - name: product_id
        description: "Unique identifier for the product."
        tests:
          - not_null
          - unique
      - name: store_id
        description: "Unique identifier for the store."
        tests:
          - not_null
      - name: snapshot_date
        description: "Date of the inventory snapshot."
      - name: average_inventory
        description: "Average inventory available on the snapshot date."
      - name: max_inventory
        description: "Maximum inventory available on the snapshot date."
      - name: min_inventory
        description: "Minimum inventory available on the snapshot date."
      - name: is_current
        description: "Indicates if the inventory snapshot is the current active record."
      - name: valid_from
        description: "Timestamp when the snapshot became active."
      - name: valid_to
        description: "Timestamp when the snapshot was superseded."
      - name: last_updated
        description: "Timestamp of the last update to the snapshot record."

  - name: ods_promotion_effectiveness
    description: "Evaluates the effectiveness of promotions on sales."
    columns:
      - name: promotion_id
        description: "Unique identifier for the promotion."
        tests:
          - not_null
          - unique
      - name: promotion_name
        description: "Name of the promotion."
      - name: start_date
        description: "Start date of the promotion."
      - name: end_date
        description: "End date of the promotion."
      - name: number_of_sales
        description: "Number of sales transactions during the promotion."
      - name: total_sales
        description: "Total sales amount during the promotion period."
        tests:
          - not_null
      - name: is_current
        description: "Indicates if the promotion data is the current active record."
      - name: valid_from
        description: "Timestamp when the promotion data became active."
      - name: valid_to
        description: "Timestamp when the promotion data was superseded."
      - name: last_updated
        description: "Timestamp of the last update to the promotion data."

  - name: ods_daily_product_sales
    description: "Ephemeral model that aggregates sales data by product and store for each day."
    columns:
      - name: store_id
        description: "Unique identifier for the store."
        tests:
          - not_null
      - name: product_id
        description: "Unique identifier for the product."
        tests:
          - not_null
      - name: sale_date
        description: "Date of sales."
      - name: total_quantity
        description: "Total quantity of products sold on the specified date."
      - name: total_sales
        description: "Total sales amount for the specified date."
      - name: is_current
        description: "Indicates if the sales record is the current active record."
      - name: valid_from
        description: "Timestamp when the sales data became active."
      - name: valid_to
        description: "Timestamp when the sales data was superseded."
      - name: last_updated
        description: "Timestamp of the last update to the sales data."

  - name: ods_sales
    description: "Aggregates sales data by date, product, and store, providing a summary of sales metrics."
    columns:
      - name: sale_date
        description: "Date when the sales occurred."
      - name: product_id
        description: "Unique identifier for the product involved in the sale."
        tests:
          - not_null
          - unique
      - name: store_id
        description: "Unique identifier for the store where the sale occurred."
        tests:
          - not_null
      - name: total_quantity
        description: "Total quantity of products sold on the specified date."
      - name: total_sales
        description: "Total sales amount for the specified date."
      - name: is_current
        description: "Indicates if the sales record is the current active record."
      - name: valid_from
        description: "Timestamp when the sales data became active."
      - name: valid_to
        description: "Timestamp when the sales data was superseded."
      - name: last_updated
        description: "Timestamp of the last update to the sales data."


  - name: ods_daily_store_sales
    description: "Aggregates total sales and the number of transactions per store for each day."
    columns:
      - name: Store_ID
        description: "The identifier for the store."
        tests:
          - not_null
          - unique
      - name: Sale_Date
        description: "The date on which the sales were recorded."
        tests:
          - not_null
      - name: Total_Sales
        description: "Total amount of sales for the store on a given day."
        tests:
          - not_null
      - name: Transactions
        description: "The count of transactions that occurred in the store on a given day."
        tests:
          - not_null

  - name: ods_sales_by_region
    description: "Aggregates sales data by region using region descriptions from seed data."
    columns:
      - name: Region_Name
        description: "The name of the region where sales were made."
        tests:
          - not_null
      - name: Store_ID
        description: "The identifier of the store, assumed to map directly to a region."
        tests:
          - not_null
      - name: Total_Sales
        description: "Total sales amount for the region."
        tests:
          - not_null
      - name: Number_of_Transactions
        description: "Total number of transactions for each region."
        tests:
          - not_null